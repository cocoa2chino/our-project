{"remainingRequest":"C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86184\\Desktop\\project\\project\\client\\src\\components\\nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\src\\components\\nav.vue","mtime":1654097538117},{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\babel.config.js","mtime":1641180900000},{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654159187643},{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1654159189886},{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654159187643},{"path":"C:\\Users\\86184\\Desktop\\project\\project\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1654159190747}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvODYxODQvRGVza3RvcC9wcm9qZWN0L3Byb2plY3QvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvODYxODQvRGVza3RvcC9wcm9qZWN0L3Byb2plY3QvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBleGl0LCBnZXRMb2dpblVzZXIsIGNoZWNrVXNlclB3ZCwgdXBkTG9naW5Vc2VySW5mbywgdXBkTG9naW5Vc2VyUHdkIH0gZnJvbSAiLi4vYXBpIjsKaW1wb3J0IGF2YXRhclVybCBmcm9tICcuLi9hc3NldHMvYXZhdGFyLnBuZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgY2hlY2tPbGRQd2QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBjaGVja1VzZXJQd2QoX3RoaXMuJHN0b3JlLnN0YXRlLnRva2VuLCB2YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IocmVzcC5tc2cpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Y6f5aeL5a+G56CB5b+F6aG76L6T5YWlIikpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNoZWNrT2xkUHdkKF94LCBfeDIsIF94MykgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGNoZWNrTmV3UHdkID0gZnVuY3Rpb24gY2hlY2tOZXdQd2QocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS/ruaUueWvhueggeW/hemhu+i+k+WFpSIpKTsKICAgICAgfQoKICAgICAgY2FsbGJhY2soKTsKICAgIH07CgogICAgdmFyIGNoZWNrUmVQd2QgPSBmdW5jdGlvbiBjaGVja1JlUHdkKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLnoa7orqTlr4bnoIHlv4XpobvovpPlhaUiKSk7CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZSAhPSBfdGhpcy51c2VyUHdkLm5ld1B3ZCkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0IikpOwogICAgICB9CgogICAgICBjYWxsYmFjaygpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBzaG93VXBkSW5mb0ZsYWc6IGZhbHNlLAogICAgICBzaG93VXBkUHdkRmxhZzogZmFsc2UsCiAgICAgIHVzZXJQd2Q6IHsKICAgICAgICBvbGRQd2Q6ICIiLAogICAgICAgIG5ld1B3ZDogIiIsCiAgICAgICAgcmVQd2Q6ICIiCiAgICAgIH0sCiAgICAgIHVzZXJQd2RGb3JtUnVsZXM6IHsKICAgICAgICBvbGRQd2Q6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrT2xkUHdkLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgbmV3UHdkOiBbewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja05ld1B3ZCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHJlUHdkOiBbewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja1JlUHdkLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgdXNlckZvcm06IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgIHBhc3NXb3JkOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBnZW5kZXI6ICIiLAogICAgICAgIGFnZTogIiIsCiAgICAgICAgcGhvbmU6ICIiCiAgICAgIH0sCiAgICAgIGF2YXRhclVybDogYXZhdGFyVXJsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlVXNlcjogZnVuY3Rpb24gaGFuZGxlVXNlcihjb21tKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKGNvbW0gPT0gImluZm8iKSB7CiAgICAgICAgdGhpcy5zaG93VXBkSW5mb1dpbigpOwogICAgICB9CgogICAgICBpZiAoY29tbSA9PSAicHdkIikgewogICAgICAgIHRoaXMuc2hvd1VwZFB3ZFdpbigpOwogICAgICB9CgogICAgICBpZiAoY29tbSA9PSAiZXhpdCIpIHsKICAgICAgICB0aGlzLiRjb25maXJtKCLnoa7orqTopoHpgIDlh7rlkJfvvJ8iLCAi57O757uf5o+Q56S6IiwgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7orqQiLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGV4aXQoX3RoaXMyLiRzdG9yZS5zdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCJjbGVhclRva2VuIik7CgogICAgICAgICAgICBfdGhpczIuJHN0b3JlLmNvbW1pdCgiY2xlYXJNZW51cyIpOwoKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKCiAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaW5pdFVzZXJQd2Q6IGZ1bmN0aW9uIGluaXRVc2VyUHdkKCkgewogICAgICB0aGlzLnVzZXJQd2QgPSB7CiAgICAgICAgb2xkUHdkOiAiIiwKICAgICAgICBuZXdQd2Q6ICIiLAogICAgICAgIHJlUHdkOiAiIgogICAgICB9OwogICAgfSwKICAgIGluaXRVc2VyRm9ybTogZnVuY3Rpb24gaW5pdFVzZXJGb3JtKCkgewogICAgICB0aGlzLnVzZXJGb3JtID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICB1c2VyTmFtZTogIiIsCiAgICAgICAgcGFzc1dvcmQ6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGdlbmRlcjogIiIsCiAgICAgICAgYWdlOiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgdG9rZW46IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuCiAgICAgIH07CiAgICB9LAogICAgc2hvd1VwZEluZm9XaW46IGZ1bmN0aW9uIHNob3dVcGRJbmZvV2luKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGdldExvZ2luVXNlcih0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzMy5pbml0VXNlckZvcm0oKTsKCiAgICAgICAgX3RoaXMzLnVzZXJGb3JtID0gcmVzcC5kYXRhOwogICAgICAgIF90aGlzMy5zaG93VXBkSW5mb0ZsYWcgPSB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93VXBkUHdkV2luOiBmdW5jdGlvbiBzaG93VXBkUHdkV2luKCkgewogICAgICB0aGlzLmluaXRVc2VyUHdkKCk7CiAgICAgIHRoaXMuc2hvd1VwZFB3ZEZsYWcgPSB0cnVlOwogICAgfSwKICAgIHVwZEluZm86IGZ1bmN0aW9uIHVwZEluZm8oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy51c2VyRm9ybS50b2tlbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuOwogICAgICB1cGRMb2dpblVzZXJJbmZvKHRoaXMudXNlckZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzcC5tc2csCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXM0LnNob3dVcGRJbmZvRmxhZyA9IGZhbHNlOwoKICAgICAgICBfdGhpczQuaW5pdFVzZXJGb3JtKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZFB3ZDogZnVuY3Rpb24gdXBkUHdkKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB1cGRMb2dpblVzZXJQd2QoX3RoaXM1LiRzdG9yZS5zdGF0ZS50b2tlbiwgX3RoaXM1LnVzZXJQd2QubmV3UHdkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcC5tc2csCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXM1LnNob3dVcGRQd2RGbGFnID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczUuaW5pdFVzZXJQd2QoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,SACAA,IADA,EAEAC,YAFA,EAGAC,YAHA,EAIAC,gBAJA,EAKAC,eALA,QAMA,QANA;AAQA;AAEA;EACAC,IADA,kBACA;IAAA;;IACA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACAC,KADA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAEAJ;kBACA;oBACAK;kBACA;gBACA,CAJA,CAFA;;cAAA;gBAAA;gBAAA;;cAAA;gBAQAA;;cARA;gBAUAA;;cAVA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;IAAA;;IAYA;MACA;QACAA;MACA;;MAEAA;IACA,CANA;;IAOA;MACA;QACAA;MACA;;MAEA;QACAA;MACA;;MAEAA;IACA,CAVA;;IAWA;MACAC,sBADA;MAEAC,qBAFA;MAGAC;QACAC,UADA;QAEAC,UAFA;QAGAC;MAHA,CAHA;MAQAC;QACAH,SACA;UACAI,sBADA;UAEAC;QAFA,CADA,CADA;QAOAJ,SACA;UACAG,sBADA;UAEAC;QAFA,CADA,CAPA;QAaAH,QACA;UACAE,qBADA;UAEAC;QAFA,CADA;MAbA,CARA;MA4BAC;QACAC,MADA;QAEAC,YAFA;QAGAC,YAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,OANA;QAOAC;MAPA,CA5BA;MAqCAC;IArCA;EAuCA,CAvEA;EAwEAC;IACAC,UADA,sBACAC,IADA,EACA;MAAA;;MACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;UACAC,uBADA;UAEAC,sBAFA;UAGAC;QAHA,GAIAC,IAJA,CAIA;UACAhC;YACA;;YACA;;YACAiC;;YACA;UACA,CALA;QAMA,CAXA;MAYA;IACA,CAxBA;IAyBAC,WAzBA,yBAyBA;MACA;QACAvB,UADA;QAEAC,UAFA;QAGAC;MAHA;IAKA,CA/BA;IAgCAsB,YAhCA,0BAgCA;MACA;QACAjB,MADA;QAEAC,YAFA;QAGAC,YAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,OANA;QAOAC,SAPA;QAQAY;MARA;IAUA,CA3CA;IA4CAC,cA5CA,4BA4CA;MAAA;;MACApC;QACA;;QACA;QACA;MACA,CAJA;IAKA,CAlDA;IAmDAqC,aAnDA,2BAmDA;MACA;MACA;IACA,CAtDA;IAuDAC,OAvDA,qBAuDA;MAAA;;MAGA;MACApC;QACA;UACAqC,iBADA;UAEAT;QAFA;;QAKA;;QACA;MACA,CARA;IASA,CApEA;IAqEAU,MArEA,kBAqEAC,QArEA,EAqEA;MAAA;;MACA;QACA;UACAtC;YACA;cACAoC,iBADA;cAEAT;YAFA;;YAKA;;YACA;UACA,CARA;QASA,CAVA,MAUA;UACA;QACA;MACA,CAdA;IAeA;EArFA;AAxEA","names":["exit","getLoginUser","checkUserPwd","updLoginUserInfo","updLoginUserPwd","data","value","callback","showUpdInfoFlag","showUpdPwdFlag","userPwd","oldPwd","newPwd","rePwd","userPwdFormRules","validator","trigger","userForm","id","userName","passWord","name","gender","age","phone","avatarUrl","methods","handleUser","comm","confirmButtonText","cancelButtonText","type","then","sessionStorage","initUserPwd","initUserForm","token","showUpdInfoWin","showUpdPwdWin","updInfo","message","updPwd","formName"],"sourceRoot":"src/components","sources":["nav.vue"],"sourcesContent":["<template>\r\n  <el-header class=\"fater-header\">\r\n    \r\n    <el-dropdown @command=\"handleUser\" class=\"fater-header-user\">   \r\n        <el-avatar :size=\"40\" :src=\"avatarUrl\"></el-avatar>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item command=\"info\"><strong>个人信息</strong></el-dropdown-item>\r\n            <el-dropdown-item command=\"pwd\"><strong>修改密码</strong></el-dropdown-item>\r\n            <el-dropdown-item command=\"exit\"><strong>退出系统</strong></el-dropdown-item>\r\n        </el-dropdown-menu>\r\n    </el-dropdown>\r\n\r\n    <el-dialog\r\n      title=\"修改信息\" width=\"600px\"\r\n      :append-to-body=\"true\" :visible.sync=\"showUpdInfoFlag\">\r\n      <el-form label-width=\"80px\" :model=\"userForm\">\r\n          <el-form-item label=\"用户账号\">\r\n              <el-input v-model=\"userForm.userName\" \r\n                  placeholder=\"请输入用户账号…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户姓名\">\r\n              <el-input v-model=\"userForm.name\" \r\n                  placeholder=\"请输入用户姓名…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户年龄\">\r\n              <el-input v-model=\"userForm.age\" \r\n                  placeholder=\"请输入用户年龄…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>  \r\n          <el-form-item label=\"用户性别\">\r\n              <el-radio-group v-model=\"userForm.gender\">\r\n                  <el-radio label=\"男\"></el-radio>\r\n                  <el-radio label=\"女\"></el-radio>\r\n              </el-radio-group>\r\n          </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"showUpdInfoFlag = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updInfo()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      title=\"修改密码\" width=\"600px\"\r\n      :append-to-body=\"true\" :visible.sync=\"showUpdPwdFlag\">\r\n      <el-form label-width=\"80px\"  ref=\"userPwd\" :model=\"userPwd\" :rules=\"userPwdFormRules\">\r\n          <el-form-item label=\"原始密码\" prop=\"oldPwd\">\r\n            <el-input\r\n                type=\"password\" v-model=\"userPwd.oldPwd\"\r\n                placeholder=\"请输入原始密码……\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        <el-form-item label=\"修改密码\" prop=\"newPwd\">\r\n          <el-input\r\n              type=\"password\" v-model=\"userPwd.newPwd\"\r\n              placeholder=\"请输入修改密码……\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"rePwd\">\r\n          <el-input\r\n            type=\"password\" v-model=\"userPwd.rePwd\"\r\n            placeholder=\"请再次确认密码……\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"showUpdPwdFlag = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updPwd('userPwd')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-header>\r\n</template>\r\n\r\n<style>\r\n</style>\r\n\r\n<script>\r\nimport {\r\n  exit,\r\n  getLoginUser,\r\n  checkUserPwd,\r\n  updLoginUserInfo,\r\n  updLoginUserPwd,\r\n} from \"../api\";\r\n\r\nimport avatarUrl from '../assets/avatar.png'\r\n\r\nexport default {\r\n  data() {\r\n    var checkOldPwd = async (rule, value, callback) => {\r\n      if (value) {\r\n        await checkUserPwd(this.$store.state.token, value).then((resp) => {\r\n          if(resp.code != 0){\r\n             callback(new Error(resp.msg));\r\n          }\r\n        });\r\n      } else {\r\n        callback(new Error(\"原始密码必须输入\"));\r\n      }\r\n      callback();\r\n    };\r\n    var checkNewPwd = (rule, value, callback) => {\r\n      if (!value) {\r\n        callback(new Error(\"修改密码必须输入\"));\r\n      }\r\n\r\n      callback();\r\n    };\r\n    var checkRePwd = (rule, value, callback) => {\r\n      if (!value) {\r\n        callback(new Error(\"确认密码必须输入\"));\r\n      }\r\n\r\n      if (value != this.userPwd.newPwd) {\r\n        callback(new Error(\"两次输入密码不一致\"));\r\n      }\r\n\r\n      callback();\r\n    };\r\n    return {\r\n      showUpdInfoFlag: false,\r\n      showUpdPwdFlag: false,\r\n      userPwd: {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        rePwd: \"\",\r\n      },\r\n      userPwdFormRules: {\r\n        oldPwd: [\r\n          {\r\n            validator: checkOldPwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        newPwd: [\r\n          {\r\n            validator: checkNewPwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        rePwd: [\r\n          {\r\n            validator: checkRePwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      userForm: {\r\n        id: \"\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        name: \"\",\r\n        gender: \"\",\r\n        age: \"\",\r\n        phone: \"\",\r\n      },\r\n      avatarUrl: avatarUrl\r\n    };\r\n  },\r\n  methods: {\r\n    handleUser(comm) {\r\n      if (comm == \"info\") {\r\n        this.showUpdInfoWin();\r\n      }\r\n\r\n      if (comm == \"pwd\") {\r\n        this.showUpdPwdWin();\r\n      }\r\n\r\n      if (comm == \"exit\") {\r\n        this.$confirm(\"确认要退出吗？\", \"系统提示\", {\r\n          confirmButtonText: \"确认\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }).then(() => {\r\n          exit(this.$store.state.token).then(() => {\r\n            this.$store.commit(\"clearToken\");\r\n            this.$store.commit(\"clearMenus\");\r\n            sessionStorage.clear();\r\n            this.$router.push(\"/\");\r\n          });\r\n        });\r\n      }\r\n    },\r\n    initUserPwd() {\r\n      this.userPwd = {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        rePwd: \"\",\r\n      };\r\n    },\r\n    initUserForm() {\r\n      this.userForm = {\r\n        id: \"\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        name: \"\",\r\n        gender: \"\",\r\n        age: \"\",\r\n        phone: \"\",\r\n        token: this.$store.state.token\r\n      };\r\n    },\r\n    showUpdInfoWin() {\r\n      getLoginUser(this.$store.state.token).then((resp) => {\r\n        this.initUserForm();\r\n        this.userForm = resp.data;\r\n        this.showUpdInfoFlag = true;\r\n      });\r\n    },\r\n    showUpdPwdWin() {\r\n      this.initUserPwd();\r\n      this.showUpdPwdFlag = true;\r\n    },\r\n    updInfo() {\r\n\t\t\r\n\r\n\t\tthis.userForm.token = this.$store.state.token;\r\n      updLoginUserInfo(this.userForm).then((resp) => {\r\n        this.$message({\r\n          message: resp.msg,\r\n          type: \"success\",\r\n        });\r\n\r\n        this.showUpdInfoFlag = false;\r\n        this.initUserForm();\r\n      });\r\n    },\r\n    updPwd(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          updLoginUserPwd(this.$store.state.token, this.userPwd.newPwd).then((resp) => {\r\n            this.$message({\r\n              message: resp.msg,\r\n              type: \"success\",\r\n            });\r\n\r\n            this.showUpdPwdFlag = false;\r\n            this.initUserPwd();\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>"]}]}