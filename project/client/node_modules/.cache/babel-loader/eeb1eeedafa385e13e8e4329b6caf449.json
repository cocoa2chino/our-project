{"remainingRequest":"D:\\newwork\\project\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\newwork\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\newwork\\project\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\newwork\\project\\client\\src\\components\\nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\newwork\\project\\client\\src\\components\\nav.vue","mtime":1654097538117},{"path":"D:\\newwork\\project\\client\\babel.config.js","mtime":1641180900000},{"path":"D:\\newwork\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654246371289},{"path":"D:\\newwork\\project\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1654246372355},{"path":"D:\\newwork\\project\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654246371289},{"path":"D:\\newwork\\project\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1654246372645}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovbmV3d29yay9wcm9qZWN0L2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L25ld3dvcmsvcHJvamVjdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGV4aXQsIGdldExvZ2luVXNlciwgY2hlY2tVc2VyUHdkLCB1cGRMb2dpblVzZXJJbmZvLCB1cGRMb2dpblVzZXJQd2QgfSBmcm9tICIuLi9hcGkiOwppbXBvcnQgYXZhdGFyVXJsIGZyb20gJy4uL2Fzc2V0cy9hdmF0YXIucG5nJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBjaGVja09sZFB3ZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrVXNlclB3ZChfdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4sIHZhbHVlKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmNvZGUgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihyZXNwLm1zZykpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLljp/lp4vlr4bnoIHlv4XpobvovpPlhaUiKSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gY2hlY2tPbGRQd2QoX3gsIF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgY2hlY2tOZXdQd2QgPSBmdW5jdGlvbiBjaGVja05ld1B3ZChydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5L+u5pS55a+G56CB5b+F6aG76L6T5YWlIikpOwogICAgICB9CgogICAgICBjYWxsYmFjaygpOwogICAgfTsKCiAgICB2YXIgY2hlY2tSZVB3ZCA9IGZ1bmN0aW9uIGNoZWNrUmVQd2QocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuehruiupOWvhueggeW/hemhu+i+k+WFpSIpKTsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlICE9IF90aGlzLnVzZXJQd2QubmV3UHdkKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QiKSk7CiAgICAgIH0KCiAgICAgIGNhbGxiYWNrKCk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIHNob3dVcGRJbmZvRmxhZzogZmFsc2UsCiAgICAgIHNob3dVcGRQd2RGbGFnOiBmYWxzZSwKICAgICAgdXNlclB3ZDogewogICAgICAgIG9sZFB3ZDogIiIsCiAgICAgICAgbmV3UHdkOiAiIiwKICAgICAgICByZVB3ZDogIiIKICAgICAgfSwKICAgICAgdXNlclB3ZEZvcm1SdWxlczogewogICAgICAgIG9sZFB3ZDogW3sKICAgICAgICAgIHZhbGlkYXRvcjogY2hlY2tPbGRQd2QsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBuZXdQd2Q6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrTmV3UHdkLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcmVQd2Q6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrUmVQd2QsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICB1c2VyRm9ybTogewogICAgICAgIGlkOiAiIiwKICAgICAgICB1c2VyTmFtZTogIiIsCiAgICAgICAgcGFzc1dvcmQ6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGdlbmRlcjogIiIsCiAgICAgICAgYWdlOiAiIiwKICAgICAgICBwaG9uZTogIiIKICAgICAgfSwKICAgICAgYXZhdGFyVXJsOiBhdmF0YXJVcmwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVVc2VyOiBmdW5jdGlvbiBoYW5kbGVVc2VyKGNvbW0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoY29tbSA9PSAiaW5mbyIpIHsKICAgICAgICB0aGlzLnNob3dVcGRJbmZvV2luKCk7CiAgICAgIH0KCiAgICAgIGlmIChjb21tID09ICJwd2QiKSB7CiAgICAgICAgdGhpcy5zaG93VXBkUHdkV2luKCk7CiAgICAgIH0KCiAgICAgIGlmIChjb21tID09ICJleGl0IikgewogICAgICAgIHRoaXMuJGNvbmZpcm0oIuehruiupOimgemAgOWHuuWQl++8nyIsICLns7vnu5/mj5DnpLoiLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruiupCIsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgZXhpdChfdGhpczIuJHN0b3JlLnN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoImNsZWFyVG9rZW4iKTsKCiAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCJjbGVhck1lbnVzIik7CgogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwoKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpbml0VXNlclB3ZDogZnVuY3Rpb24gaW5pdFVzZXJQd2QoKSB7CiAgICAgIHRoaXMudXNlclB3ZCA9IHsKICAgICAgICBvbGRQd2Q6ICIiLAogICAgICAgIG5ld1B3ZDogIiIsCiAgICAgICAgcmVQd2Q6ICIiCiAgICAgIH07CiAgICB9LAogICAgaW5pdFVzZXJGb3JtOiBmdW5jdGlvbiBpbml0VXNlckZvcm0oKSB7CiAgICAgIHRoaXMudXNlckZvcm0gPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgICBwYXNzV29yZDogIiIsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZ2VuZGVyOiAiIiwKICAgICAgICBhZ2U6ICIiLAogICAgICAgIHBob25lOiAiIiwKICAgICAgICB0b2tlbjogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgfTsKICAgIH0sCiAgICBzaG93VXBkSW5mb1dpbjogZnVuY3Rpb24gc2hvd1VwZEluZm9XaW4oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZ2V0TG9naW5Vc2VyKHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMzLmluaXRVc2VyRm9ybSgpOwoKICAgICAgICBfdGhpczMudXNlckZvcm0gPSByZXNwLmRhdGE7CiAgICAgICAgX3RoaXMzLnNob3dVcGRJbmZvRmxhZyA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dVcGRQd2RXaW46IGZ1bmN0aW9uIHNob3dVcGRQd2RXaW4oKSB7CiAgICAgIHRoaXMuaW5pdFVzZXJQd2QoKTsKICAgICAgdGhpcy5zaG93VXBkUHdkRmxhZyA9IHRydWU7CiAgICB9LAogICAgdXBkSW5mbzogZnVuY3Rpb24gdXBkSW5mbygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnVzZXJGb3JtLnRva2VuID0gdGhpcy4kc3RvcmUuc3RhdGUudG9rZW47CiAgICAgIHVwZExvZ2luVXNlckluZm8odGhpcy51c2VyRm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiByZXNwLm1zZywKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgIH0pOwoKICAgICAgICBfdGhpczQuc2hvd1VwZEluZm9GbGFnID0gZmFsc2U7CgogICAgICAgIF90aGlzNC5pbml0VXNlckZvcm0oKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkUHdkOiBmdW5jdGlvbiB1cGRQd2QoZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHVwZExvZ2luVXNlclB3ZChfdGhpczUuJHN0b3JlLnN0YXRlLnRva2VuLCBfdGhpczUudXNlclB3ZC5uZXdQd2QpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwLm1zZywKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczUuc2hvd1VwZFB3ZEZsYWcgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzNS5pbml0VXNlclB3ZCgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,SACAA,IADA,EAEAC,YAFA,EAGAC,YAHA,EAIAC,gBAJA,EAKAC,eALA,QAMA,QANA;AAQA;AAEA;EACAC,IADA,kBACA;IAAA;;IACA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACAC,KADA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAEAJ;kBACA;oBACAK;kBACA;gBACA,CAJA,CAFA;;cAAA;gBAAA;gBAAA;;cAAA;gBAQAA;;cARA;gBAUAA;;cAVA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;IAAA;;IAYA;MACA;QACAA;MACA;;MAEAA;IACA,CANA;;IAOA;MACA;QACAA;MACA;;MAEA;QACAA;MACA;;MAEAA;IACA,CAVA;;IAWA;MACAC,sBADA;MAEAC,qBAFA;MAGAC;QACAC,UADA;QAEAC,UAFA;QAGAC;MAHA,CAHA;MAQAC;QACAH,SACA;UACAI,sBADA;UAEAC;QAFA,CADA,CADA;QAOAJ,SACA;UACAG,sBADA;UAEAC;QAFA,CADA,CAPA;QAaAH,QACA;UACAE,qBADA;UAEAC;QAFA,CADA;MAbA,CARA;MA4BAC;QACAC,MADA;QAEAC,YAFA;QAGAC,YAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,OANA;QAOAC;MAPA,CA5BA;MAqCAC;IArCA;EAuCA,CAvEA;EAwEAC;IACAC,UADA,sBACAC,IADA,EACA;MAAA;;MACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;UACAC,uBADA;UAEAC,sBAFA;UAGAC;QAHA,GAIAC,IAJA,CAIA;UACAhC;YACA;;YACA;;YACAiC;;YACA;UACA,CALA;QAMA,CAXA;MAYA;IACA,CAxBA;IAyBAC,WAzBA,yBAyBA;MACA;QACAvB,UADA;QAEAC,UAFA;QAGAC;MAHA;IAKA,CA/BA;IAgCAsB,YAhCA,0BAgCA;MACA;QACAjB,MADA;QAEAC,YAFA;QAGAC,YAHA;QAIAC,QAJA;QAKAC,UALA;QAMAC,OANA;QAOAC,SAPA;QAQAY;MARA;IAUA,CA3CA;IA4CAC,cA5CA,4BA4CA;MAAA;;MACApC;QACA;;QACA;QACA;MACA,CAJA;IAKA,CAlDA;IAmDAqC,aAnDA,2BAmDA;MACA;MACA;IACA,CAtDA;IAuDAC,OAvDA,qBAuDA;MAAA;;MAGA;MACApC;QACA;UACAqC,iBADA;UAEAT;QAFA;;QAKA;;QACA;MACA,CARA;IASA,CApEA;IAqEAU,MArEA,kBAqEAC,QArEA,EAqEA;MAAA;;MACA;QACA;UACAtC;YACA;cACAoC,iBADA;cAEAT;YAFA;;YAKA;;YACA;UACA,CARA;QASA,CAVA,MAUA;UACA;QACA;MACA,CAdA;IAeA;EArFA;AAxEA","names":["exit","getLoginUser","checkUserPwd","updLoginUserInfo","updLoginUserPwd","data","value","callback","showUpdInfoFlag","showUpdPwdFlag","userPwd","oldPwd","newPwd","rePwd","userPwdFormRules","validator","trigger","userForm","id","userName","passWord","name","gender","age","phone","avatarUrl","methods","handleUser","comm","confirmButtonText","cancelButtonText","type","then","sessionStorage","initUserPwd","initUserForm","token","showUpdInfoWin","showUpdPwdWin","updInfo","message","updPwd","formName"],"sourceRoot":"src/components","sources":["nav.vue"],"sourcesContent":["<template>\r\n  <el-header class=\"fater-header\">\r\n    \r\n    <el-dropdown @command=\"handleUser\" class=\"fater-header-user\">   \r\n        <el-avatar :size=\"40\" :src=\"avatarUrl\"></el-avatar>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item command=\"info\"><strong>个人信息</strong></el-dropdown-item>\r\n            <el-dropdown-item command=\"pwd\"><strong>修改密码</strong></el-dropdown-item>\r\n            <el-dropdown-item command=\"exit\"><strong>退出系统</strong></el-dropdown-item>\r\n        </el-dropdown-menu>\r\n    </el-dropdown>\r\n\r\n    <el-dialog\r\n      title=\"修改信息\" width=\"600px\"\r\n      :append-to-body=\"true\" :visible.sync=\"showUpdInfoFlag\">\r\n      <el-form label-width=\"80px\" :model=\"userForm\">\r\n          <el-form-item label=\"用户账号\">\r\n              <el-input v-model=\"userForm.userName\" \r\n                  placeholder=\"请输入用户账号…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户姓名\">\r\n              <el-input v-model=\"userForm.name\" \r\n                  placeholder=\"请输入用户姓名…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户年龄\">\r\n              <el-input v-model=\"userForm.age\" \r\n                  placeholder=\"请输入用户年龄…\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>  \r\n          <el-form-item label=\"用户性别\">\r\n              <el-radio-group v-model=\"userForm.gender\">\r\n                  <el-radio label=\"男\"></el-radio>\r\n                  <el-radio label=\"女\"></el-radio>\r\n              </el-radio-group>\r\n          </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"showUpdInfoFlag = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updInfo()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      title=\"修改密码\" width=\"600px\"\r\n      :append-to-body=\"true\" :visible.sync=\"showUpdPwdFlag\">\r\n      <el-form label-width=\"80px\"  ref=\"userPwd\" :model=\"userPwd\" :rules=\"userPwdFormRules\">\r\n          <el-form-item label=\"原始密码\" prop=\"oldPwd\">\r\n            <el-input\r\n                type=\"password\" v-model=\"userPwd.oldPwd\"\r\n                placeholder=\"请输入原始密码……\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        <el-form-item label=\"修改密码\" prop=\"newPwd\">\r\n          <el-input\r\n              type=\"password\" v-model=\"userPwd.newPwd\"\r\n              placeholder=\"请输入修改密码……\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"rePwd\">\r\n          <el-input\r\n            type=\"password\" v-model=\"userPwd.rePwd\"\r\n            placeholder=\"请再次确认密码……\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"showUpdPwdFlag = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updPwd('userPwd')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-header>\r\n</template>\r\n\r\n<style>\r\n</style>\r\n\r\n<script>\r\nimport {\r\n  exit,\r\n  getLoginUser,\r\n  checkUserPwd,\r\n  updLoginUserInfo,\r\n  updLoginUserPwd,\r\n} from \"../api\";\r\n\r\nimport avatarUrl from '../assets/avatar.png'\r\n\r\nexport default {\r\n  data() {\r\n    var checkOldPwd = async (rule, value, callback) => {\r\n      if (value) {\r\n        await checkUserPwd(this.$store.state.token, value).then((resp) => {\r\n          if(resp.code != 0){\r\n             callback(new Error(resp.msg));\r\n          }\r\n        });\r\n      } else {\r\n        callback(new Error(\"原始密码必须输入\"));\r\n      }\r\n      callback();\r\n    };\r\n    var checkNewPwd = (rule, value, callback) => {\r\n      if (!value) {\r\n        callback(new Error(\"修改密码必须输入\"));\r\n      }\r\n\r\n      callback();\r\n    };\r\n    var checkRePwd = (rule, value, callback) => {\r\n      if (!value) {\r\n        callback(new Error(\"确认密码必须输入\"));\r\n      }\r\n\r\n      if (value != this.userPwd.newPwd) {\r\n        callback(new Error(\"两次输入密码不一致\"));\r\n      }\r\n\r\n      callback();\r\n    };\r\n    return {\r\n      showUpdInfoFlag: false,\r\n      showUpdPwdFlag: false,\r\n      userPwd: {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        rePwd: \"\",\r\n      },\r\n      userPwdFormRules: {\r\n        oldPwd: [\r\n          {\r\n            validator: checkOldPwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        newPwd: [\r\n          {\r\n            validator: checkNewPwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        rePwd: [\r\n          {\r\n            validator: checkRePwd,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      userForm: {\r\n        id: \"\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        name: \"\",\r\n        gender: \"\",\r\n        age: \"\",\r\n        phone: \"\",\r\n      },\r\n      avatarUrl: avatarUrl\r\n    };\r\n  },\r\n  methods: {\r\n    handleUser(comm) {\r\n      if (comm == \"info\") {\r\n        this.showUpdInfoWin();\r\n      }\r\n\r\n      if (comm == \"pwd\") {\r\n        this.showUpdPwdWin();\r\n      }\r\n\r\n      if (comm == \"exit\") {\r\n        this.$confirm(\"确认要退出吗？\", \"系统提示\", {\r\n          confirmButtonText: \"确认\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }).then(() => {\r\n          exit(this.$store.state.token).then(() => {\r\n            this.$store.commit(\"clearToken\");\r\n            this.$store.commit(\"clearMenus\");\r\n            sessionStorage.clear();\r\n            this.$router.push(\"/\");\r\n          });\r\n        });\r\n      }\r\n    },\r\n    initUserPwd() {\r\n      this.userPwd = {\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        rePwd: \"\",\r\n      };\r\n    },\r\n    initUserForm() {\r\n      this.userForm = {\r\n        id: \"\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        name: \"\",\r\n        gender: \"\",\r\n        age: \"\",\r\n        phone: \"\",\r\n        token: this.$store.state.token\r\n      };\r\n    },\r\n    showUpdInfoWin() {\r\n      getLoginUser(this.$store.state.token).then((resp) => {\r\n        this.initUserForm();\r\n        this.userForm = resp.data;\r\n        this.showUpdInfoFlag = true;\r\n      });\r\n    },\r\n    showUpdPwdWin() {\r\n      this.initUserPwd();\r\n      this.showUpdPwdFlag = true;\r\n    },\r\n    updInfo() {\r\n\t\t\r\n\r\n\t\tthis.userForm.token = this.$store.state.token;\r\n      updLoginUserInfo(this.userForm).then((resp) => {\r\n        this.$message({\r\n          message: resp.msg,\r\n          type: \"success\",\r\n        });\r\n\r\n        this.showUpdInfoFlag = false;\r\n        this.initUserForm();\r\n      });\r\n    },\r\n    updPwd(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          updLoginUserPwd(this.$store.state.token, this.userPwd.newPwd).then((resp) => {\r\n            this.$message({\r\n              message: resp.msg,\r\n              type: \"success\",\r\n            });\r\n\r\n            this.showUpdPwdFlag = false;\r\n            this.initUserPwd();\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>"]}]}